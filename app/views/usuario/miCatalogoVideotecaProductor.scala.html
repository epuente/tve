@(estado:Long, id:String)
@main{
    <br>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h1>Catálogo de videoteca</h1></div>
    </div>
    <div class="row block-center">
        <div class="col-md-6 col-sm-6 col-xs-6 vbottom"></div>
        <div class="col-md-2 col-sm-2 col-xs-2 vbottom" id="filtro*"  name="filtroEdo" style="padding-bottom:5px; cursor:pointer; vertical-align:baseline;">Todos</div>
        <div class="col-md-2 col-sm-2 col-xs-2 vbottom" id="filtro4"  name="filtroEdo" style="padding-bottom:5px; cursor:pointer">Por validar</div>
        <div class="col-md-2 col-sm-2 col-xs-2 vbottom" id="filtro5"  name="filtroEdo" style="padding-bottom:5px; cursor:pointer">Validados</div>
    </div>

    <div class="table-responsive">
        <table id="tabla" class="table table-striped table-bordered"  cellspacing="0" width="100%">
            <thead>
            <tr>
                <td>ID</td>
                <td>Serie</td>
                <td>Título</td>
                <td>Obra</td>
                <td>Catalogador</td>
                <td>Estado</td>
            </tr>
            </thead>
        </table>
    </div>

}




<script>
        //var laTablaDTSS;
        //var laTablaDTSSDetalle;

        var tablaDT;


        $(function(){
            $.notifyDefaults({
                type: 'success',
                newest_on_top: true,
                z_index: 999000
            });


         tablaDT =  $('#tabla').DataTable( {
        	 "stateSave": true,
             "language": {
                 "url": "@routes.Assets.at("Spanish.json")"
             },
             "processing": false,
             "serverSide": true,

             "ajax": {
                 "url":  "@routes.ProductorVideotecaController.listDTSS()",
                 "contentType": "application/json; charset=utf-8",
                 "dataType": "json"
             },
             "columns": [
                 { "data": "clave",
                   "render": function(data, type, row, meta){
                         return "<a href=\"javascript:catalogoSoloInfo("+row.id+")\">"+data+"</a>";
                   }
                 },
                 {"data": "serie"},
                 { "data": "titulo"},
                  { "data": "obra"},
                  { "data": "catalogador"}
               ],
               "initComplete": function(settings, json) {
            	   $(".rowInner:odd").css("background-color","#f0f0f5")
            	   $("#tabla .row:odd").css("margin-left","-7px").css("margin-right","-7px");
            }
         } );


         tablaDT.off( 'xhr');
         tablaDT.on( 'xhr', function () {
           //console.dir(tablaDT.ajax)
             var json = tablaDT.ajax.json();
             console.log("..........",json)
           //  alert( json.data.length +' row(s) were loaded' );

             var data = tablaDT.ajax.params();
             //alert( 'Search term was: '+data.search.value )
             console.dir(data)
            $(".rowInner:odd").css("background-color", "#bbbbff" );
         } );

        tablaDT.off('mouseenter');
        tablaDT.on('mouseenter', 'td', function () {
            console.log("mouseover...")
            tablaDT
                .cells()
                .nodes()
                .each((el) => el.classList.add('highlight'));
        });


            @*
            laTablaDTSS = $('#tablaMisServicios').DataTable( {
                pageLength: -1,
                lengthMenu: [  [1,3, 5, 10, 25, 50, -1], [1,3, 5, 10, 25, 50, "Todos"]   ],
                language: {
                    url: "@routes.Assets.at("Spanish.json")"
                },
                processing: false,
                serverSide: true,
                //scrollY: 400,
                scrollY: '60vh',
                scrollCollapse: true,
                stateSave: true,
                scrollX: false,
                mark: true,
                ajax: {
                    url:  "@routes.ProductorVideotecaController.listDTSS",
                    data: { estado: @estado },
                    contentType: "application/json; charset=utf-8",
                    dataType: "json"
                },
                deferRender: true,
                "columns": [
                    {"data": "folio",
                        "render": function(data, type, row, meta){
                            var r = data;
                            if ( row["tieneArchs"]==true ){
                                 stacked=
                                  '<div style="cursor:pointer"  data-toggle="tooltip"  title="Ver archivos del oficio"  data-placement="top"<div class="fa-stack fa-lg pull-right"><a onclick="javascript:modalVerArchivosOficio('+row["oficioId"]+')"><i class="fas fa-eye fa-stack-1x fa-lg" style="font-size: 1em;"></i><i class="far fa-file fa-stack-1x fa-lg"></i></a></div></div>  ';
                              //  r+= "<div style=\"cursor:pointer; text-align:center;\"   data-toggle=\"tooltip\"     title=\"Ver archivos del oficio\"  data-placement=\"top\"   ><a onclick='javascript:modalVerArchivosOficio("+row["oficioId"]+")'><i class=\"fa fa-eye fa-lg\" aria-hidden=\"true\"></i></a></div>";
                               r+=stacked;
                            }
                            return r;
                        }

                    },
                    {"data": "ur",          "visible": true,    "searchable": true},
                    {"data": "descripcion"},
                    {"data": "estado",      "visible": true,   "searchable": false,     "sortable":false},

                    {"data": "id" , "visible": false, "searchable": false},
                    {"data": "estadoId", "visible": false , "searchable": false}
                  ],
                "initComplete": function(){
                    $("#tablaMisServicios_wrapper div.row div").removeClass("col-sm-6");
                    $("#tablaMisServicios_wrapper div.row div:eq(0)").addClass("col-sm-4");
                    $("#tablaMisServicios_wrapper div.row div:eq(2)").addClass("col-sm-8");
                    $(".dataTables_filter").css("width","auto");


                    //console.dir( laTablaDTSS.rows().data()  )


                    @if(estado!=0){
                        toggleFiltro( $("#filtro@estado") );
                        @if(id!=""){
                            $("#tablaMisServicios tbody tr").find("td:eq(0)").each(function(i,r){
                                console.log("tablita..."+ r.innerHTML   )
                                if (r.innerHTML == "@id"){
                                    $(r).click();
                                }
                            });
                        }
                    }else{
                        seleccionaPrimerRenlon();
                    }







                 //   $('div.dataTables_scrollBody').css("max-height", $(window).height()-400+"px" );

                }

            } );   //  fin del datatables
            *@
        }); // fin del function()


    function seleccionaPrimerRenlon(){
    	borrarContenidoDetalle();
    	if ($("#tablaMisServicios tbody tr").length > 0){
	        $("#tablaMisServicios tbody").find("tr:first td:eq(0)").click();
	        console.log("seleccionado el primer renglon")
    	}
    }

	 function borrarContenidoDetalle(){
	      $("#tablaMisServiciosDetalle tbody, #tablaMisServiciosDetalle tfoot").empty();
	         $("#tituloDetalle, #observacionOficio, #observacionFolio").html("");
	 }

	 $('#tablaMisServicios').off( 'page.dt');
	 $('#tablaMisServicios').on( 'page.dt', function () {
		 borrarContenidoDetalle();
		} );

    </script>

<script src="@routes.Assets.at("gentelella/vendors/datatables.net/js/jquery.dataTables.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-buttons/js/dataTables.buttons.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-buttons/js/buttons.flash.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-buttons/js/buttons.html5.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-buttons/js/buttons.print.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-responsive/js/dataTables.responsive.min.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js")"></script>
<script src="@routes.Assets.at("gentelella/vendors/datatables.net-scroller/js/dataTables.scroller.min.js")"></script>


<!-- Chart.js -->
<script src="@routes.Assets.at("gentelella/vendors/Chart.js/dist/Chart.min.js")"></script>
<!-- jQuery Sparklines -->
<script src="@routes.Assets.at("gentelella/vendors/jquery-sparkline/dist/jquery.sparkline.min.js")"></script>
<!-- easy-pie-chart -->
<script src="@routes.Assets.at("gentelella/vendors/jquery.easy-pie-chart/dist/jquery.easypiechart.min.js")"></script>


<script src="@routes.Assets.at("javascripts/detalleServiciosAjax.js")"></script>
<script src="@routes.Assets.at("javascripts/agendaAjax.js")"></script>
<script src="@routes.Assets.at("lib/moment/min/moment.min.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("lib/moment/locale/es.js")" type="text/javascript"></script>

<script src="@routes.Assets.at("mark.js/datatables.mark.min.js")"></script>
<script src="@routes.Assets.at("mark.js/jquery.mark.min.js")"></script>

<script src="@routes.Assets.at("javascripts/misServicios.js")"></script>
<!-- 	<script src="@routes.Assets.at("printThis/printThis.js")"></script> -->

<script src="@routes.Assets.at("print.js/print.min.js")"></script>
<link href="@routes.Assets.at("print.js/print.min.css")" rel="stylesheet">
<link href="@routes.Assets.at("stylesheets/fa-personalizados.css")" rel="stylesheet">

<script src="@routes.Assets.at("bootstrap-notify/bootstrap-notify.min.js")"></script>

<script src="@routes.Assets.at("javascripts/general.js")"></script>
